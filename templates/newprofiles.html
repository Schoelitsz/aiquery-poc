{% extends 'base.html' %}

{% block sidebar_content %}
    <li class="nav-item">
        <a class="btn btn-primary btn-block" href="/">Home</a>
    </li>
    <li class="nav-item">
        <a class="btn btn-primary btn-block" href="/manageprofiles">Manage profiles</a>
    </li>
    <li class="nav-item"></li>
        <a class="btn btn-danger btn-block" href="/admin">Admin</a>
    </li>
{% endblock %}

{% block title %}
    Create Profile
{% endblock %}

{% block body %}
<div class="container">
    <h1>Create a New Profile</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <form method="POST" action="{{ url_for('newprofile.savenewprofile') }}">
        <div class="form-group">
            <label for="profile_name">Profile Name:</label>
            <input type="text" class="form-control" id="profile_name" name="profile_name" required>
        </div>

        <div class="form-group">
            <label for="db_connection_info">Database Connection Info:</label>
            <textarea class="form-control" id="db_connection_info" name="db_connection_info" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="abstract_layer_path">Abstract Layer Path:</label>
            <input type="text" class="form-control" id="abstract_layer_path" name="abstract_layer_path" required>
        </div>

        <div class="form-group">
            <label for="created_at">Created At:</label>
            <input type="date" class="form-control" id="created_at" name="created_at" value="{{ date }}" readonly>
        </div>

        <button type="submit" class="btn btn-primary">Create Profile</button>
    </form>
    
</div>
{% endblock %}
